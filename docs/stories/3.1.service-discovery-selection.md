# Story 3.1: Service Discovery & Selection

## Status

In Progress

## Story

**As a** Customer,
**I want** to discover and browse available cleaning services in my area,
**so that** I can compare options, view pricing, and select the right service for my needs before booking.

## Acceptance Criteria

1. **Real Service Data**: Service cards display actual data from the Prisma database (businesses, services, pricing)
2. **Service Categories**: Filter services by type (Regular Cleaning, Deep Cleaning, Move-in/Move-out, etc.)
3. **Business Information**: Display business names, ratings, service areas, and availability
4. **Pricing Display**: Clear, upfront pricing with service duration and "per session" indicators
5. **Service Selection**: Click-to-select functionality that leads to booking flow
6. **CleanEase UI**: Maintain the professional gradient-based design system
7. **Real-time Data**: Services update based on actual database content, not hardcoded data
8. **Responsive Design**: Maintain desktop-first approach with mobile compatibility

## Design Requirements

### **Visual Style (CleanEase Continued)**

- **Professional Service Cards**: Elevated cards with gradients, shadows, and hover effects
- **Badge System**: "Most Popular", "Highly Rated", "New Business" badges
- **Rating Display**: Star ratings with actual review scores from database
- **Business Branding**: Business logos/images, branded colors where available
- **Filter UI**: Clean filter sidebar or top-bar for service category selection

### **Data Display**

- **Service Cards**: Business name, service type, duration, price, rating, availability
- **Business Cards**: Separate view showing business profile, multiple services, contact info
- **Availability Indicators**: "Available Today", "Next Available: Tomorrow", etc.
- **Distance/Area**: "Services your area" or specific postcode coverage

## Tasks / Subtasks

### **PHASE 1: Database Integration**

- [x] Task 1.1: Connect dashboard to real Prisma data
  - [x] Create service data fetching hooks/utilities
  - [x] Replace hardcoded service cards with database queries
  - [x] Set up business and service data relationships
  - [x] Implement error handling for database queries
  - [x] Add loading states for data fetching

- [x] Task 1.2: Service categorization and filtering
  - [x] Implement service category filtering (by ServiceCategory enum)
  - [x] Add search functionality for services/businesses
  - [x] Create filter UI components with CleanEase styling
  - [x] Add sort options (price, rating, distance, availability)

### **PHASE 2: Enhanced Service Display**

- [x] Task 2.1: Rich service information display
  - [x] Show actual business names and branding
  - [x] Display real ratings and review counts
  - [x] Add service descriptions and included features
  - [x] Show business service areas/postcodes covered
  - [x] Add "View Business Profile" functionality

- [x] Task 2.2: Pricing and availability
  - [x] Display accurate pricing from database
  - [x] Show service duration estimates
  - [x] Add availability indicators (mock for now)
  - [x] Implement "Compare Services" functionality
  - [x] Add "Add to Favorites" for future bookings

### **PHASE 3: Service Selection & Booking Initiation**

- [x] Task 3.1: Service selection flow
  - [x] Add "Book Now" functionality that leads to booking form
  - [x] Create service detail modal/page for more information
  - [x] Implement service customization options (simplified to single booking)
  - [x] Add date/time selection for initial booking
  - [x] Create booking summary preview

- [x] Task 3.2: Business interaction features
  - [x] Add "Contact Business" functionality
  - [x] Show business response times and policies
  - [x] Add "Request Quote" for custom services
  - [x] Implement business availability calendar integration
  - [x] Add special offers/promotions display

### **PHASE 4: User Experience Enhancement**

- [ ] Task 4.1: Advanced discovery features
  - [ ] Add map view for business locations (future enhancement)
  - [ ] Implement "Recommended for You" algorithm
  - [ ] Add service history and rebooking shortcuts
  - [ ] Create "Popular in Your Area" sections
  - [ ] Add seasonal service recommendations

- [ ] Task 4.2: Performance and polish
  - [ ] Optimize database queries and add caching
  - [ ] Add smooth transitions between service views
  - [ ] Implement infinite scroll or pagination for large service lists
  - [ ] Add accessibility improvements for screen readers
  - [ ] Optimize images and loading performance

## Technical Implementation

### **Database Queries**

- **Services with Business Info**: JOIN services with businesses and profiles
- **Filter Queries**: WHERE clauses for category, location, price range
- **Rating Aggregation**: Calculate average ratings from booking feedback
- **Availability Logic**: Check business schedules and existing bookings

### **State Management**

- **Service Filters**: Zustand store for filter state
- **Selected Service**: Track currently selected service for booking
- **Cart/Booking State**: Manage service selection before checkout
- **User Preferences**: Save favorite services and businesses

### **API Endpoints (tRPC)**

- `services.getAll()` - Fetch all services with business info
- `services.getByCategory(category)` - Filter by service type
- `services.getByBusiness(businessId)` - Get all services for a business
- `businesses.getInArea(postcode)` - Get businesses serving user's area
- `bookings.getAvailability(serviceId, date)` - Check service availability

## Success Metrics

- **Service Discovery**: >90% of users browse multiple services before selecting
- **Conversion Rate**: >25% of service views lead to booking initiation
- **Data Accuracy**: 100% of displayed prices and info match database
- **Performance**: Service list loads in <2 seconds
- **User Engagement**: >60% of users interact with filters or search

## Dev Agent Record

- **Agent Model Used**: Claude Sonnet 4
- **Implementation Status**: Story Created - Ready for Development
- **Previous Context**: Building on completed authentication (Story 2.1) and existing dashboard UI
- **Next Steps**: Begin PHASE 1 database integration with real service data

---

**Ready to connect the beautiful CleanEase UI to real business data! ðŸš€**
